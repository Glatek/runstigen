import"./components/lantmateriet-karta.js";import"./components/glaskogencard-buy.js";document.location.href.includes("folkminnen")&&(import("./components/folklore-article.js"),document.body.classList.add("folkminnen"));const d=L.icon({iconUrl:"img/overnight-cabin.svg",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),u=L.icon({iconUrl:"img/farm.svg",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),h=L.icon({iconUrl:"img/lean-to.svg",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),g=L.icon({iconUrl:"img/lay-by.svg",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),m=L.icon({iconUrl:"img/folklore-place.svg",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),y=L.icon({iconUrl:"img/undefined.svg",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]});function N(o=navigator.userAgent){const n=o.match(/iPad/i),e=o.match(/iPhone/i),t=o.match(/Safari/i);return Boolean(n||e||t)}function f(o){return o.properties.type==="FARM"?u:o.properties.type==="OVERNIGHT_CABIN"?d:o.properties.type==="LEAN_TO"?h:o.properties.type==="LAY_BY"?g:o.properties.type==="FOLKLORE_PLACE"?m:y}async function k(o,n){if(o.properties){const e=[];if("data"in o.properties){n.on("click",()=>{console.log("layer click"),document.dispatchEvent(new CustomEvent("folklore:display",{detail:{url:"data/"+o.properties.data}}))},!1);return}o.properties.title&&e.push(`<b>${o.properties.title}</b>`),o.properties.type!=="FARM"&&e.push(`Glaskogennummer: ${o.properties.glaskogenNumber||"ok\xE4nt"}`),o.properties.bedCount&&e.push(`B\xE4ddar: ${o.properties.bedCount}`),o.properties.desc&&e.push(`${o.properties.desc}`),n.bindPopup(e.join("<br>"))}}async function i({map:o,path:n,color:e,fillColor:t}){const c=await(await fetch(n)).json(),a=(p,l)=>L.marker(l,{icon:f(p)}),s=L.markerClusterGroup();L.geoJSON(c,{pointToLayer:a,onEachFeature:k}).addTo(s),s.addTo(o)}const A=o=>i({map:o,path:"data/layBy.json"}),b=o=>i({map:o,path:"data/leanTo.json"}),v=o=>i({map:o,path:"data/overnightCabins.json"}),S=o=>i({map:o,path:"data/folklorePlace.json"});async function C(o){document.location.pathname==="/folkminnen"||document.location.hash==="#folkminnen"?S(o):(v(o),b(o),A(o))}document.querySelector("header button").addEventListener("click",()=>{const o=document.querySelector("glaskogencard-buy");o.getAttribute("open")?o.removeAttribute("open"):o.setAttribute("open","")}),document.addEventListener("map:ready",()=>{const{leafletMap:o}=document.querySelector("lantmateriet-karta"),n=new L.LatLngBounds([[59.61628,12.21927],[59.36161,12.60455]]),e=[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest(),n.getNorthWest()];L.polyline(e,{color:"#BC5800"}).addTo(o),C(o),o.setView(n.getCenter(),11),o.on("click",function(t){const{lat:r,lng:c}=o.mouseEventToLatLng(t.originalEvent);console.log(JSON.stringify([c,r]))})});
